{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _defineProperty2 from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _excluded = [\"onPress\", \"linkDefault\", \"onLongPress\", \"linkStyle\", \"linkify\", \"linkText\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty2(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport mdurl from 'mdurl';\n\nvar linkify = require('linkify-it')();\n\nvar OS = Platform.OS;\n\nvar Hyperlink = function (_Component) {\n  _inherits(Hyperlink, _Component);\n\n  var _super = _createSuper(Hyperlink);\n\n  function Hyperlink(props) {\n    var _this;\n\n    _classCallCheck(this, Hyperlink);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"linkify\", function (component) {\n      if (!_this.state.linkifyIt.pretest(component.props.children) || !_this.state.linkifyIt.test(component.props.children)) return component;\n      var elements = [];\n      var _lastIndex = 0;\n\n      var componentProps = _objectSpread(_objectSpread({}, component.props), {}, {\n        ref: undefined,\n        key: undefined\n      });\n\n      try {\n        var _this$state$linkifyIt;\n\n        (_this$state$linkifyIt = _this.state.linkifyIt.match(component.props.children)) === null || _this$state$linkifyIt === void 0 ? void 0 : _this$state$linkifyIt.forEach(function (_ref) {\n          var _this$props$injectVie, _this$props3;\n\n          var index = _ref.index,\n              lastIndex = _ref.lastIndex,\n              text = _ref.text,\n              url = _ref.url;\n          var nonLinkedText = component.props.children.substring(_lastIndex, index);\n          nonLinkedText && elements.push(nonLinkedText);\n          _lastIndex = lastIndex;\n          if (_this.props.linkText) text = typeof _this.props.linkText === 'function' ? _this.props.linkText(url) : _this.props.linkText;\n          var clickHandlerProps = {};\n\n          if (OS !== 'web') {\n            clickHandlerProps.onLongPress = _this.props.onLongPress ? function () {\n              var _this$props$onLongPre, _this$props;\n\n              return (_this$props$onLongPre = (_this$props = _this.props).onLongPress) === null || _this$props$onLongPre === void 0 ? void 0 : _this$props$onLongPre.call(_this$props, url, text);\n            } : undefined;\n          }\n\n          clickHandlerProps.onPress = _this.props.onPress ? function () {\n            var _this$props$onPress, _this$props2;\n\n            return (_this$props$onPress = (_this$props2 = _this.props).onPress) === null || _this$props$onPress === void 0 ? void 0 : _this$props$onPress.call(_this$props2, url, text);\n          } : undefined;\n          elements.push(React.createElement(Text, _extends({}, componentProps, clickHandlerProps, {\n            key: url + index,\n            style: [component.props.style, _this.props.linkStyle]\n          }, (_this$props$injectVie = (_this$props3 = _this.props).injectViewProps) === null || _this$props$injectVie === void 0 ? void 0 : _this$props$injectVie.call(_this$props3, url)), text));\n        });\n        elements.push(component.props.children.substring(_lastIndex, component.props.children.length));\n        return React.cloneElement(component, componentProps, elements);\n      } catch (err) {\n        return component;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"parse\", function (component) {\n      var _ref2 = component || {},\n          _ref2$props = _ref2.props;\n\n      _ref2$props = _ref2$props === void 0 ? {\n        children: undefined\n      } : _ref2$props;\n      var children = _ref2$props.children;\n      if (!children) return component;\n\n      var componentProps = _objectSpread(_objectSpread({}, component.props), {}, {\n        ref: undefined,\n        key: undefined\n      });\n\n      return React.cloneElement(component, componentProps, React.Children.map(children, function (child) {\n        var _ref3 = child || {},\n            _ref3$type = _ref3.type;\n\n        _ref3$type = _ref3$type === void 0 ? {\n          displayName: undefined\n        } : _ref3$type;\n        var displayName = _ref3$type.displayName;\n        if (typeof child === 'string' && _this.state.linkifyIt.pretest(child)) return _this.linkify(React.createElement(Text, _extends({}, componentProps, {\n          style: component.props.style\n        }), child));\n        if (displayName === 'Text' && !_this.isTextNested(child)) return _this.linkify(child);\n        return _this.parse(child);\n      }));\n    });\n\n    _this.state = {\n      linkifyIt: props.linkify || linkify\n    };\n    return _this;\n  }\n\n  _createClass(Hyperlink, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          onPress = _this$props4.onPress,\n          linkDefault = _this$props4.linkDefault,\n          onLongPress = _this$props4.onLongPress,\n          linkStyle = _this$props4.linkStyle,\n          linkify = _this$props4.linkify,\n          linkText = _this$props4.linkText,\n          viewProps = _objectWithoutProperties(_this$props4, _excluded);\n\n      return React.createElement(View, _extends({}, viewProps, {\n        style: this.props.style\n      }), !this.props.onPress && !this.props.onLongPress && !this.props.linkStyle ? this.props.children : this.parse(this).props.children);\n    }\n  }, {\n    key: \"isTextNested\",\n    value: function isTextNested(component) {\n      if (!React.isValidElement(component)) throw new Error('Invalid component');\n      var _component$type = component.type;\n      _component$type = _component$type === void 0 ? {} : _component$type;\n      var displayName = _component$type.displayName;\n      if (displayName !== 'Text') throw new Error('Not a Text component');\n      return typeof component.props.children !== 'string';\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      return nextProps.linkify !== prevState.linkifyIt ? {\n        linkifyIt: nextProps.linkify || linkify\n      } : null;\n    }\n  }]);\n\n  return Hyperlink;\n}(Component);\n\n_defineProperty(Hyperlink, \"defaultProps\", {\n  linkify: linkify,\n  injectViewProps: function injectViewProps(_) {\n    return {};\n  }\n});\n\nvar _default = function (_Component2) {\n  _inherits(_default, _Component2);\n\n  var _super2 = _createSuper(_default);\n\n  function _default(props) {\n    var _this2;\n\n    _classCallCheck(this, _default);\n\n    _this2 = _super2.call(this, props);\n    _this2.handleLink = _this2.handleLink.bind(_assertThisInitialized(_this2));\n    return _this2;\n  }\n\n  _createClass(_default, [{\n    key: \"handleLink\",\n    value: function handleLink(url) {\n      var urlObject = mdurl.parse(url);\n      urlObject.protocol = urlObject.protocol.toLowerCase();\n      var normalizedURL = mdurl.format(urlObject);\n      Linking.canOpenURL(normalizedURL).then(function (supported) {\n        return supported && Linking.openURL(normalizedURL);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var onPress = this.handleLink || this.props.onPress;\n      return this.props.linkDefault ? React.createElement(Hyperlink, _extends({}, this.props, {\n        onPress: onPress\n      })) : React.createElement(Hyperlink, this.props);\n    }\n  }]);\n\n  return _default;\n}(Component);\n\nexport { _default as default };","map":{"version":3,"sources":["Hyperlink.tsx"],"names":["linkify","require","OS","Hyperlink","injectViewProps","_","getDerivedStateFromProps","prevState","linkifyIt","nextProps","constructor","props","render","viewProps","style","isTextNested","React","type","displayName","component","elements","_lastIndex","componentProps","ref","key","undefined","url","nonLinkedText","text","clickHandlerProps","children","child","handleLink","urlObject","mdurl","normalizedURL","Linking","supported","onPress"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAA,KAAA,IAAA,SAAA,QAAA,OAAA;;;;;AAEA,OAAA,KAAA,MAAA,OAAA;;AAOA,IAAMA,OAAO,GAAGC,OAAO,CAAvB,YAAuB,CAAPA,EAAhB;;AAEA,IAAQC,EAAR,GAAA,QAAA,CAAQA,EAAR;;IAEA,S;;;;;EAeCQ,mBAAW,KAAXA,EAAmC;IAAA;;IAAA;;IAClC,0BAAA,KAAA;;IADkC,eAAA,gCAAA,SAAA,EAoCxBS,UAAAA,SAAD,EAAqC;MAC9C,IACC,CAAC,MAAA,KAAA,CAAA,SAAA,CAAA,OAAA,CAA6BA,SAAS,CAATA,KAAAA,CAA9B,QAAC,CAAD,IACA,CAAC,MAAA,KAAA,CAAA,SAAA,CAAA,IAAA,CAA0BA,SAAS,CAATA,KAAAA,CAF5B,QAEE,CAFF,EAIC,OAAA,SAAA;MAED,IAAIC,QAAQ,GAAZ,EAAA;MACA,IAAIC,UAAU,GAAd,CAAA;;MAEA,IAAMC,cAAc,mCAChBH,SAAS,CADU,KAAH;QAEnBI,GAAG,EAFmB,SAAH;QAGnBC,GAAG,EAAEC;MAHc,EAApB;;MAMA,IAAI;QAAA,IAAA,qBAAA;;QACH,CAAA,qBAAA,GAAA,MAAA,KAAA,CAAA,SAAA,CAAA,KAAA,CACQN,SAAS,CAATA,KAAAA,CADR,QAAA,CAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAAA,OAAA,CAEW,UAAA,IAAA,EAAqC;UAAA,IAAA,qBAAA,EAAA,YAAA;;UAApC,IAAA,KAAA,GAAoC,IAApC,CAAA,KAAA;UAAA,IAAA,SAAA,GAAoC,IAApC,CAAA,SAAA;UAAA,IAAA,IAAA,GAAoC,IAApC,CAAA,IAAA;UAAA,IAA0BO,GAA1B,GAAoC,IAApC,CAA0BA,GAA1B;UACV,IAAIC,aAAa,GAAGR,SAAS,CAATA,KAAAA,CAAAA,QAAAA,CAAAA,SAAAA,CAAAA,UAAAA,EAApB,KAAoBA,CAApB;UAIAQ,aAAa,IAAIP,QAAQ,CAARA,IAAAA,CAAjBO,aAAiBP,CAAjBO;UACAN,UAAU,GAAVA,SAAAA;UACA,IAAI,MAAA,KAAA,CAAJ,QAAA,EACCO,IAAI,GACH,OAAO,MAAA,KAAA,CAAP,QAAA,KAAA,UAAA,GACG,MAAA,KAAA,CAAA,QAAA,CADH,GACG,CADH,GAEG,MAAA,KAAA,CAHJA,QAAAA;UAKD,IAAMC,iBAGL,GAHD,EAAA;;UAIA,IAAI3B,EAAE,KAAN,KAAA,EAAkB;YACjB2B,iBAAiB,CAAjBA,WAAAA,GAAgC,MAAA,KAAA,CAAA,WAAA,GAC7B,YAAA;cAAA,IAAA,qBAAA,EAAA,WAAA;;cAAA,OAAA,CAAA,qBAAA,GAAM,CAAA,WAAA,GAAA,MAAA,KAAA,EAAN,WAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAM,qBAAA,CAAA,IAAA,CAAA,WAAA,EAAA,GAAA,EAAN,IAAM,CAAN;YAD6B,CAAA,GAAhCA,SAAAA;UAGA;;UACDA,iBAAiB,CAAjBA,OAAAA,GAA4B,MAAA,KAAA,CAAA,OAAA,GACzB,YAAA;YAAA,IAAA,mBAAA,EAAA,YAAA;;YAAA,OAAA,CAAA,mBAAA,GAAM,CAAA,YAAA,GAAA,MAAA,KAAA,EAAN,OAAA,MAAA,IAAA,IAAA,mBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAM,mBAAA,CAAA,IAAA,CAAA,YAAA,EAAA,GAAA,EAAN,IAAM,CAAN;UADyB,CAAA,GAA5BA,SAAAA;UAIAT,QAAQ,CAARA,IAAAA,CACC,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA,EAAA,EAAA,cAAA,EAAA,iBAAA,EAAA;YAGC,GAAG,EAAEM,GAAG,GAHT,KAAA;YAIC,KAAK,EAAE,CAACP,SAAS,CAATA,KAAAA,CAAD,KAAA,EAAwB,MAAA,KAAA,CAAxB,SAAA;UAJR,CAAA,EAAA,CAAA,qBAAA,GAKK,CAAA,YAAA,GAAA,MAAA,KAAA,EALL,eAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAKK,qBAAA,CAAA,IAAA,CAAA,YAAA,EALL,GAKK,CALL,CAAA,EADDC,IACC,CADDA;QA5BF,CAAA,CAAA;QAwCAA,QAAQ,CAARA,IAAAA,CACCD,SAAS,CAATA,KAAAA,CAAAA,QAAAA,CAAAA,SAAAA,CAAAA,UAAAA,EAECA,SAAS,CAATA,KAAAA,CAAAA,QAAAA,CAHFC,MACCD,CADDC;QAMA,OAAOJ,KAAK,CAALA,YAAAA,CAAAA,SAAAA,EAAAA,cAAAA,EAAP,QAAOA,CAAP;MA/CD,CAAA,CAgDE,OAAA,GAAA,EAAY;QACb,OAAA,SAAA;MACA;IAtGiC,CAAA,CAAA;;IAAA,eAAA,gCAAA,OAAA,EAyG1BG,UAAAA,SAAD,EAA2D;MAClE,YAAwDA,SAAS,IAAjE,EAAA;MAAA,wBAAMR,KAAN;;MAAA,uCAA4B;QAAEmB,QAAQ,EAAEL;MAAZ,CAA5B;MAAA,IAAeK,QAAf,eAAeA,QAAf;MACA,IAAI,CAAJ,QAAA,EAAe,OAAA,SAAA;;MAEf,IAAMR,cAAc,mCAChBH,SAAS,CADU,KAAH;QAEnBI,GAAG,EAFmB,SAAH;QAGnBC,GAAG,EAAEC;MAHc,EAApB;;MAMA,OAAO,KAAK,CAAL,YAAA,CAAA,SAAA,EAAA,cAAA,EAGN,KAAK,CAAL,QAAA,CAAA,GAAA,CAAA,QAAA,EAA8BM,UAAAA,KAAD,EAAiC;QAC7D,YACCA,KAAK,IADN,EAAA;QAAA,uBAAMd,IAAN;;QAAA,qCAA8B;UAAEC,WAAW,EAAEO;QAAf,CAA9B;QAAA,IAAcP,WAAd,cAAcA,WAAd;QAEA,IAAI,OAAA,KAAA,KAAA,QAAA,IAA6B,MAAA,KAAA,CAAA,SAAA,CAAA,OAAA,CAAjC,KAAiC,CAAjC,EACC,OAAO,MAAA,OAAA,CACN,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA,EAAA,EAAA,cAAA,EAAA;UAEC,KAAK,EAAEC,SAAS,CAATA,KAAAA,CAAgBL;QAFxB,CAAA,CAAA,EADD,KACC,CADM,CAAP;QAQD,IAAII,WAAW,KAAXA,MAAAA,IAA0B,CAAC,MAAA,YAAA,CAA/B,KAA+B,CAA/B,EACC,OAAO,MAAA,OAAA,CAAP,KAAO,CAAP;QACD,OAAO,MAAA,KAAA,CAAP,KAAO,CAAP;MAjBF,CAGC,CAHM,CAAP;IAnHkC,CAAA,CAAA;;IAElC,MAAA,KAAA,GAAa;MAAEV,SAAS,EAAEG,KAAK,CAALA,OAAAA,IAAiBX;IAA9B,CAAb;IAFkC;EAGlC;;;;WAEDY,kBAAS;MACR,mBAQI,KARJ,KAAA;MAAA,IAAM,OAAN,gBAAM,OAAN;MAAA,IAAM,WAAN,gBAAM,WAAN;MAAA,IAAM,WAAN,gBAAM,WAAN;MAAA,IAAM,SAAN,gBAAM,SAAN;MAAA,IAAM,OAAN,gBAAM,OAAN;MAAA,IAAM,QAAN,gBAAM,QAAN;MAAA,IAOIC,SAPJ;;MAUA,OACC,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA,EAAA,EAAA,SAAA,EAAA;QAEC,KAAK,EAAE,KAAA,KAAA,CAAWC;MAFnB,CAAA,CAAA,EAIE,CAAC,KAAA,KAAA,CAAD,OAAA,IAAuB,CAAC,KAAA,KAAA,CAAxB,WAAA,IAAkD,CAAC,KAAA,KAAA,CAAnD,SAAA,GACE,KAAA,KAAA,CADF,QAAA,GAGE,KAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CARL,QACC,CADD;IAWA;;;WAEDC,sBAAY,SAAZA,EAA8C;MAC7C,IAAI,CAACC,KAAK,CAALA,cAAAA,CAAL,SAAKA,CAAL,EAAsC,MAAM,IAAA,KAAA,CAAN,mBAAM,CAAN;MACtC,sBAAA,SAAA,CAAMC,IAAN;MAAA,+CAA8B,EAA9B;MAAA,IAAcC,WAAd,mBAAcA,WAAd;MACA,IAAIA,WAAW,KAAf,MAAA,EAA4B,MAAM,IAAA,KAAA,CAAN,sBAAM,CAAN;MAC5B,OAAO,OAAOC,SAAS,CAATA,KAAAA,CAAP,QAAA,KAAP,QAAA;IACA;;;WA3Cab,kCAAwB,SAAxBA,EAAwB,SAAxBA,EAGW;MACxB,OAAO,SAAS,CAAT,OAAA,KAAsBC,SAAS,CAA/B,SAAA,GACJ;QAAEC,SAAS,EAAEC,SAAS,CAATA,OAAAA,IAAqBT;MAAlC,CADI,GAAP,IAAA;IAGA;;;;EAbF,S;;gBAAMG,S,kBACiD;EACrDH,OADqD,EACrDA,OADqD;EAErDI,eAAe,EAAEC,yBAAAA,CAAC;IAAA,OAAA,EAAA;EAAA;AAFmC,C;;;;;;;EAyJtDK,kBAAW,KAAXA,EAAmC;IAAA;;IAAA;;IAClC,4BAAA,KAAA;IACA,OAAA,UAAA,GAAkB,OAAA,UAAA,CAAlB,IAAkB,gCAAlB;IAFkC;EAGlC;;;;WAEDsB,oBAAU,GAAVA,EAAwB;MACvB,IAAMC,SAAS,GAAGC,KAAK,CAALA,KAAAA,CAAlB,GAAkBA,CAAlB;MACAD,SAAS,CAATA,QAAAA,GAAqBA,SAAS,CAATA,QAAAA,CAArBA,WAAqBA,EAArBA;MACA,IAAME,aAAa,GAAGD,KAAK,CAALA,MAAAA,CAAtB,SAAsBA,CAAtB;MAEAE,OAAO,CAAPA,UAAAA,CAAAA,aAAAA,EAAAA,IAAAA,CACCC,UAAAA,SAAS;QAAA,OAAIA,SAAS,IAAID,OAAO,CAAPA,OAAAA,CAD3BA,aAC2BA,CAAjB;MAAA,CADVA;IAGA;;;WAEDxB,kBAAS;MACR,IAAM0B,OAAO,GAAG,KAAA,UAAA,IAAmB,KAAA,KAAA,CAAnC,OAAA;MACA,OAAO,KAAA,KAAA,CAAA,WAAA,GACN,KAAA,CAAA,aAAA,CAAA,SAAA,EAAA,QAAA,CAAA,EAAA,EACK,KADL,KAAA,EAAA;QAEC,OAAO,EAAEA;MAFV,CAAA,CAAA,CADM,GAMN,KAAA,CAAA,aAAA,CAAA,SAAA,EAAe,KANhB,KAMC,CAND;IAQA;;;;EA1Ba,S","sourcesContent":["import React, { Component } from 'react';\nimport { View, Text, Linking, Platform } from 'react-native';\nimport mdurl from 'mdurl';\nimport type {\n\tHyperlinkProps,\n\tHyperlinkState,\n\tReactElementWithType,\n} from './types';\n\nconst linkify = require('linkify-it')();\n\nconst { OS } = Platform;\n\nclass Hyperlink extends Component<HyperlinkProps, HyperlinkState> {\n\tpublic static defaultProps: Partial<HyperlinkProps> = {\n\t\tlinkify,\n\t\tinjectViewProps: _ => ({}),\n\t};\n\n\tpublic static getDerivedStateFromProps(\n\t\tnextProps: HyperlinkProps,\n\t\tprevState: HyperlinkState,\n\t): HyperlinkState | null {\n\t\treturn nextProps.linkify !== prevState.linkifyIt\n\t\t\t? { linkifyIt: nextProps.linkify || linkify }\n\t\t\t: null;\n\t}\n\n\tconstructor(props: HyperlinkProps) {\n\t\tsuper(props);\n\t\tthis.state = { linkifyIt: props.linkify || linkify };\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tonPress,\n\t\t\tlinkDefault,\n\t\t\tonLongPress,\n\t\t\tlinkStyle,\n\t\t\tlinkify,\n\t\t\tlinkText,\n\t\t\t...viewProps\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<View\n\t\t\t\t{...viewProps}\n\t\t\t\tstyle={this.props.style}\n\t\t\t>\n\t\t\t\t{!this.props.onPress && !this.props.onLongPress && !this.props.linkStyle\n\t\t\t\t\t? this.props.children\n\t\t\t\t\t: //@ts-ignore\n\t\t\t\t\t  this.parse(this).props.children}\n\t\t\t</View>\n\t\t);\n\t}\n\n\tisTextNested(component: ReactElementWithType) {\n\t\tif (!React.isValidElement(component)) throw new Error('Invalid component');\n\t\tlet { type: { displayName } = {} } = component;\n\t\tif (displayName !== 'Text') throw new Error('Not a Text component');\n\t\treturn typeof component.props.children !== 'string';\n\t}\n\n\tlinkify = (component: ReactElementWithType) => {\n\t\tif (\n\t\t\t!this.state.linkifyIt.pretest(component.props.children) ||\n\t\t\t!this.state.linkifyIt.test(component.props.children)\n\t\t)\n\t\t\treturn component;\n\n\t\tlet elements = [];\n\t\tlet _lastIndex = 0;\n\n\t\tconst componentProps = {\n\t\t\t...component.props,\n\t\t\tref: undefined,\n\t\t\tkey: undefined,\n\t\t};\n\n\t\ttry {\n\t\t\tthis.state.linkifyIt\n\t\t\t\t.match(component.props.children)\n\t\t\t\t?.forEach(({ index, lastIndex, text, url }) => {\n\t\t\t\t\tlet nonLinkedText = component.props.children.substring(\n\t\t\t\t\t\t_lastIndex,\n\t\t\t\t\t\tindex,\n\t\t\t\t\t);\n\t\t\t\t\tnonLinkedText && elements.push(nonLinkedText);\n\t\t\t\t\t_lastIndex = lastIndex;\n\t\t\t\t\tif (this.props.linkText)\n\t\t\t\t\t\ttext =\n\t\t\t\t\t\t\ttypeof this.props.linkText === 'function'\n\t\t\t\t\t\t\t\t? this.props.linkText(url)\n\t\t\t\t\t\t\t\t: this.props.linkText;\n\n\t\t\t\t\tconst clickHandlerProps: {\n\t\t\t\t\t\tonPress?: HyperlinkProps['onPress'];\n\t\t\t\t\t\tonLongPress?: HyperlinkProps['onLongPress'];\n\t\t\t\t\t} = {};\n\t\t\t\t\tif (OS !== 'web') {\n\t\t\t\t\t\tclickHandlerProps.onLongPress = this.props.onLongPress\n\t\t\t\t\t\t\t? () => this.props.onLongPress?.(url, text)\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t}\n\t\t\t\t\tclickHandlerProps.onPress = this.props.onPress\n\t\t\t\t\t\t? () => this.props.onPress?.(url, text)\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\t\telements.push(\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t{...componentProps}\n\t\t\t\t\t\t\t{...clickHandlerProps}\n\t\t\t\t\t\t\tkey={url + index}\n\t\t\t\t\t\t\tstyle={[component.props.style, this.props.linkStyle]}\n\t\t\t\t\t\t\t{...this.props.injectViewProps?.(url)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{text}\n\t\t\t\t\t\t</Text>,\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\telements.push(\n\t\t\t\tcomponent.props.children.substring(\n\t\t\t\t\t_lastIndex,\n\t\t\t\t\tcomponent.props.children.length,\n\t\t\t\t),\n\t\t\t);\n\t\t\treturn React.cloneElement(component, componentProps, elements);\n\t\t} catch (err) {\n\t\t\treturn component;\n\t\t}\n\t};\n\n\tparse = (component: ReactElementWithType): ReactElementWithType => {\n\t\tlet { props: { children } = { children: undefined } } = component || {};\n\t\tif (!children) return component;\n\n\t\tconst componentProps = {\n\t\t\t...component.props,\n\t\t\tref: undefined,\n\t\t\tkey: undefined,\n\t\t};\n\n\t\treturn React.cloneElement(\n\t\t\tcomponent,\n\t\t\tcomponentProps,\n\t\t\tReact.Children.map(children, (child: ReactElementWithType) => {\n\t\t\t\tlet { type: { displayName } = { displayName: undefined } } =\n\t\t\t\t\tchild || {};\n\t\t\t\tif (typeof child === 'string' && this.state.linkifyIt.pretest(child))\n\t\t\t\t\treturn this.linkify(\n\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t{...componentProps}\n\t\t\t\t\t\t\tstyle={component.props.style}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{child}\n\t\t\t\t\t\t</Text>,\n\t\t\t\t\t);\n\t\t\t\tif (displayName === 'Text' && !this.isTextNested(child))\n\t\t\t\t\treturn this.linkify(child);\n\t\t\t\treturn this.parse(child);\n\t\t\t}),\n\t\t);\n\t};\n}\n\nexport default class extends Component<HyperlinkProps> {\n\tconstructor(props: HyperlinkProps) {\n\t\tsuper(props);\n\t\tthis.handleLink = this.handleLink.bind(this);\n\t}\n\n\thandleLink(url: string) {\n\t\tconst urlObject = mdurl.parse(url);\n\t\turlObject.protocol = urlObject.protocol.toLowerCase();\n\t\tconst normalizedURL = mdurl.format(urlObject);\n\n\t\tLinking.canOpenURL(normalizedURL).then(\n\t\t\tsupported => supported && Linking.openURL(normalizedURL),\n\t\t);\n\t}\n\n\trender() {\n\t\tconst onPress = this.handleLink || this.props.onPress;\n\t\treturn this.props.linkDefault ? (\n\t\t\t<Hyperlink\n\t\t\t\t{...this.props}\n\t\t\t\tonPress={onPress}\n\t\t\t/>\n\t\t) : (\n\t\t\t<Hyperlink {...this.props} />\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}